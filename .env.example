# ╔══════════════════════════════════════════════════════════════════════════════╗
# ║                    LAYRA ENVIRONMENT CONFIGURATION                           ║
# ║                    Copy this file to .env and fill in your values            ║
# ╚══════════════════════════════════════════════════════════════════════════════╝

# ========================
# SERVER CONFIGURATION
# ========================
SERVER_IP=http://localhost:8090
DEBUG_MODE=false
ALLOWED_ORIGINS=http://localhost:8090,http://localhost:3000
LOG_LEVEL=INFO
MAX_WORKERS=4

# ========================
# REDIS CONFIGURATION
# ========================
REDIS_URL=redis:6379
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_TOKEN_DB=0
REDIS_TASK_DB=1
REDIS_LOCK_DB=2

# ========================
# MONGODB CONFIGURATION
# ========================
MONGODB_URL=mongodb:27017
MONGODB_ROOT_USERNAME=admin
MONGODB_ROOT_PASSWORD=your_secure_mongo_password_here
MONGODB_DB=chat_mongodb
MONGODB_POOL_SIZE=50
MONGODB_MIN_POOL_SIZE=5

# ========================
# MYSQL CONFIGURATION
# ========================
MYSQL_ROOT_PASSWORD=your_secure_mysql_root_password_here
MYSQL_DATABASE=layra_db
MYSQL_USER=layra
MYSQL_PASSWORD=your_secure_mysql_password_here
DB_URL=mysql+asyncmy://layra:your_secure_mysql_password_here@mysql:3306/layra_db
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ========================
# MINIO CONFIGURATION
# ========================
MINIO_URL=http://minio:9000
MINIO_PUBLIC_URL=http://localhost:9080
MINIO_PUBLIC_PORT=9080
MINIO_ACCESS_KEY=your_minio_access_key_here
MINIO_SECRET_KEY=your_secure_minio_secret_key_here
MINIO_BUCKET_NAME=minio-file
MINIO_IMAGE_URL_PREFIX=http://localhost:8090/minio-file
# Milvus internal MinIO (for vector storage)
MILVUS_MINIO_ACCESS_KEY=minioadmin
MILVUS_MINIO_SECRET_KEY=minioadmin

# ========================
# KAFKA CONFIGURATION
# ========================
KAFKA_BROKER_URL=kafka:9094
KAFKA_TOPIC=task_generation
KAFKA_PARTITIONS_NUMBER=3
KAFKA_GROUP_ID=task_consumer_group
KAFKA_RETRY_BACKOFF_MS=5000
KAFKA_SESSION_TIMEOUT_MS=30000

# ========================
# MILVUS CONFIGURATION
# ========================
MILVUS_URI=http://milvus-standalone:19530
VECTOR_DB=milvus

# ========================
# MODEL SERVER CONFIGURATION
# ========================
MODEL_SERVER_URL=http://model-server:8005

# ========================
# EMBEDDING CONFIGURATION
# ========================
# Options:
#   - local_colqwen: Requires GPU with 16GB+ VRAM, downloads ~15GB models
#   - jina_embeddings_v4: Uses cloud API, no GPU required (needs JINA_API_KEY)
EMBEDDING_MODEL=local_colqwen
COLBERT_MODEL_PATH=/model_weights/colqwen2.5-v0.2
# Model download source (use mirror for faster download in China)
MODEL_BASE_URL=https://huggingface.co/vidore
# Hugging Face Token (optional, for accessing gated models)
# HF_TOKEN=hf_your_huggingface_token_here
# Jina Embeddings API (required if EMBEDDING_MODEL=jina_embeddings_v4)
# JINA_API_KEY=your_jina_api_key_here

# ========================
# DOCUMENT PROCESSING
# ========================
EMBEDDING_IMAGE_DPI=200
UNOSERVER_INSTANCES=1
UNOSERVER_HOST=unoserver
UNOSERVER_BASE_PORT=2003
UNOSERVER_BASE_UNO_PORT=3003

# ========================
# SANDBOX CONFIGURATION
# ========================
SANDBOX_SHARED_VOLUME=/app/sandbox_workspace
SANDBOX_MEMORY_LIMIT=256m

# ========================
# RAG / HYBRID SEARCH
# ========================
RAG_HYBRID_ENABLED=false
RAG_HYBRID_RANKER=rrf
RAG_HYBRID_RRF_K=60
RAG_HYBRID_DENSE_WEIGHT=0.7
RAG_HYBRID_SPARSE_WEIGHT=0.3

# ========================
# LLM PROVIDERS
# ========================
# At least one LLM provider API key is REQUIRED

# OpenAI (recommended) - https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# DeepSeek (cost-effective reasoning) - https://platform.deepseek.com/
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here

# Anthropic Claude - https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Google Gemini - https://makersuite.google.com/app/apikey
# GEMINI_API_KEY=AIza-your-gemini-api-key-here

# Zhipu GLM (Chinese language optimized) - https://open.bigmodel.cn/
# ZHIPUAI_API_KEY=your-zhipuai-api-key-here

# Z.ai (GLM Coding Plan) - https://z.ai/manage-apikey/apikey-list
# ZAI_API_KEY=your-zai-api-key-here

# Moonshot/Kimi (Chinese language) - https://platform.moonshot.cn/
# MOONSHOT_API_KEY=sk-your-moonshot-api-key-here

# MiniMax - https://www.minimaxi.com/
# MINIMAX_API_KEY=your-minimax-api-key-here

# Cohere - https://dashboard.cohere.com/api-keys
# COHERE_API_KEY=your-cohere-api-key-here

# Ollama (local models) - https://ollama.ai/
# OLLAMA_API_KEY=your-ollama-api-key-here

# Default model routing
DEFAULT_LLM_PROVIDER=openai
DEFAULT_LLM_MODEL=gpt-4o

# CLIProxyAPI (OpenAI-compatible proxy for CLI tools)
# CLIPROXYAPI_BASE_URL=http://cliproxyapi:8317/v1
# CLIPROXYAPI_API_KEY=layra-cliproxyapi-key

# ========================
# FRONTEND / AUTH
# ========================
NEXT_PUBLIC_API_BASE_URL=http://localhost:8090/api/v1
NODE_ENV=production
SECRET_KEY=your_jwt_secret_key_generate_with_openssl_rand_hex_32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=11520
SINGLE_TENANT_MODE=false
# DATALAB_API_KEY=your-datalab-api-key-here
